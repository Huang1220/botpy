# 事件监听

---

**本文档概述[botpy的事件监听](https://github.com/tencent-connect/botpy/blob/feature/botpy_1.0/botpy/flags.py)**

## 准备
```python
import botpy
```

## 使用方式

通过继承实现`bot.Client`, 实现自己的机器人Client

在`MyClient`类中调用函数实现处理事件的功能

```python
class MyClient(botpy.Client):
```

## 监听的事件

### 1. 监听At机器人消息事件

首先需要订阅事件`public_guild_messages`

```python
intents = botpy.Intents(public_guild_messages=True) 
client = MyClient(intents=intents)
```

|对应函数| 说明 |
| --------- | ---- |
| on_at_message_create(self, message: Message) | 当收到@机器人的消息时 |
| on_public_message_delete(self, message: Message) | 当频道的消息被删除时 |

```python
class MyClient(botpy.Client):
    async def on_at_message_create(self, message: Message):
        """
        此处为处理该事件的代码
        """
    async def on_public_message_delete(self, message: Message):
        """
        此处为处理该事件的代码
        """
